<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title> 13 R Modulo 4.3 - Estrutura do habitat | Fundamentos de Ecologia Numérica</title>
<meta name="author" content="Prof. Elvio S. F. Medeiros">
<meta name="author" content="Laboratório de Ecologia">
<meta name="author" content="Universidade Estadual da Paraíba">
<meta name="author" content="Campus V, João Pessoa, PB">
<meta name="description" content="RESUMO  Apresentação   13.1 Sobre os dados Usaremos para esse tutorial dois conjuntos de dados. A Matriz ambiental (ppbio06p-amb.xlsx) de dados coletados no Programa de Pesquisa em Biodiversidade...">
<meta name="generator" content="bookdown 0.38 with bs4_book()">
<meta property="og:title" content=" 13 R Modulo 4.3 - Estrutura do habitat | Fundamentos de Ecologia Numérica">
<meta property="og:type" content="book">
<meta property="og:description" content="RESUMO  Apresentação   13.1 Sobre os dados Usaremos para esse tutorial dois conjuntos de dados. A Matriz ambiental (ppbio06p-amb.xlsx) de dados coletados no Programa de Pesquisa em Biodiversidade...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content=" 13 R Modulo 4.3 - Estrutura do habitat | Fundamentos de Ecologia Numérica">
<meta name="twitter:description" content="RESUMO  Apresentação   13.1 Sobre os dados Usaremos para esse tutorial dois conjuntos de dados. A Matriz ambiental (ppbio06p-amb.xlsx) de dados coletados no Programa de Pesquisa em Biodiversidade...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.2/transition.js"></script><script src="libs/bs3compat-0.4.2/tabs.js"></script><script src="libs/bs3compat-0.4.2/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet">
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script><script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><script src="libs/rglWebGL-binding-1.1.3/rglWebGL.js"></script><link href="libs/rglwidgetClass-1.1.3/rgl.css" rel="stylesheet">
<script src="libs/rglwidgetClass-1.1.3/rglClass.src.js"></script><script src="libs/rglwidgetClass-1.1.3/utils.src.js"></script><script src="libs/rglwidgetClass-1.1.3/buffer.src.js"></script><script src="libs/rglwidgetClass-1.1.3/subscenes.src.js"></script><script src="libs/rglwidgetClass-1.1.3/shaders.src.js"></script><script src="libs/rglwidgetClass-1.1.3/shadersrc.src.js"></script><script src="libs/rglwidgetClass-1.1.3/textures.src.js"></script><script src="libs/rglwidgetClass-1.1.3/projection.src.js"></script><script src="libs/rglwidgetClass-1.1.3/mouse.src.js"></script><script src="libs/rglwidgetClass-1.1.3/init.src.js"></script><script src="libs/rglwidgetClass-1.1.3/pieces.src.js"></script><script src="libs/rglwidgetClass-1.1.3/draw.src.js"></script><script src="libs/rglwidgetClass-1.1.3/controls.src.js"></script><script src="libs/rglwidgetClass-1.1.3/selection.src.js"></script><script src="libs/rglwidgetClass-1.1.3/rglTimer.src.js"></script><script src="libs/rglwidgetClass-1.1.3/pretty.src.js"></script><script src="libs/rglwidgetClass-1.1.3/axes.src.js"></script><script src="libs/rglwidgetClass-1.1.3/animation.src.js"></script><script src="libs/CanvasMatrix4-1.1.3/CanvasMatrix.src.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
          margin-bottom: 1em;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="Disciplina de Ecologia Numérica do Curso de Ciências Biológicas do Campus V da UEPB">Fundamentos de Ecologia Numérica</a>:
        <small class="text-muted">Disciplina de Ecologia Numérica do Curso de Ciências Biológicas do Campus V da UEPB</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Apresentação</a></li>
<li><a class="" href="intro.html"><span class="header-section-number">2</span> Introdução ao R/RStudio</a></li>
<li class="book-part">BASES DE DADOS</li>
<li><a class="" href="bases.html"><span class="header-section-number">3</span> Bases de dados. Dados do PPBio Semiárido</a></li>
<li><a class="" href="basepeixes.html"><span class="header-section-number">4</span> Base de dados I - Peixes</a></li>
<li><a class="" href="basehab.html"><span class="header-section-number">5</span> Base de dados II - Habitat</a></li>
<li class="book-part">ESTATÍSTICAS DESCRITIVAS</li>
<li><a class="" href="xls.html"><span class="header-section-number">6</span> R Modulo 1 - Importando planilhas de dados</a></li>
<li><a class="" href="tiposR.html"><span class="header-section-number">7</span> R Modulo 2 - Tipos de dados no R</a></li>
<li><a class="" href="univ.html"><span class="header-section-number">8</span> R Modulo 3.1 - Estatísticas descritivas e normalidade</a></li>
<li><a class="" href="univ2.html"><span class="header-section-number">9</span> R Modulo 3.2 - Testes estatísticos</a></li>
<li><a class="" href="unigr.html"><span class="header-section-number">10</span> R Modulo 3.3 - Gráficos univariados</a></li>
<li><a class="" href="estrcom.html"><span class="header-section-number">11</span> R Modulo 4.1 - Estrutura da comunidade</a></li>
<li><a class="" href="partdiv.html"><span class="header-section-number">12</span> R Modulo 4.2 - Decomposição da diversidade</a></li>
<li><a class="active" href="estrhab.html"><span class="header-section-number">13</span> R Modulo 4.3 - Estrutura do habitat</a></li>
<li><a class="" href="reltrns.html"><span class="header-section-number">14</span> R Modulo 5 - Relativizações e transformações</a></li>
<li><a class="" href="outcentr.html"><span class="header-section-number">15</span> R Módulo 6 - Análise de outliers baseada no desvio padrão do centróide</a></li>
<li><a class="" href="r-modulo-10-1.html"><span class="header-section-number">16</span> R Modulo 10-1</a></li>
<li class="book-part">ANÁLISES MULTIVARIADAS</li>
<li><a class="" href="upgma.html"><span class="header-section-number">17</span> R Módulo 7 - Análise de Classificação Hierárquica - SAHN</a></li>
<li><a class="" href="bibliografia-geral.html">Bibliografia Geral</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="estrhab" class="section level1" number="13">
<h1>
<span class="header-section-number"> 13</span> R Modulo 4.3 - Estrutura do habitat<a class="anchor" aria-label="anchor" href="#estrhab"><i class="fas fa-link"></i></a>
</h1>
<div id="resumo-10" class="section level3 unnumbered">
<h3>RESUMO<a class="anchor" aria-label="anchor" href="#resumo-10"><i class="fas fa-link"></i></a>
</h3>
</div>
<div id="apresentação-10" class="section level3 unnumbered">
<h3>Apresentação<a class="anchor" aria-label="anchor" href="#apresenta%C3%A7%C3%A3o-10"><i class="fas fa-link"></i></a>
</h3>
</div>
<div id="sobre-os-dados-5" class="section level2" number="13.1">
<h2>
<span class="header-section-number">13.1</span> Sobre os dados<a class="anchor" aria-label="anchor" href="#sobre-os-dados-5"><i class="fas fa-link"></i></a>
</h2>
<p>Usaremos para esse tutorial dois conjuntos de dados. A <strong>Matriz ambiental</strong> (<a href="https://docs.google.com/spreadsheets/d/1V_QxcorksaSOa40Uzj1z2jy02WgKeFTx/edit?usp=drive_link&amp;ouid=101766125969589673518&amp;rtpof=true&amp;sd=true">ppbio06p-amb.xlsx</a>) de dados coletados no Programa de Pesquisa em Biodiversidade - PPBio (Veja <a href="https://ppbio.inpa.gov.br/Sobre">Programa de Pesquisa em Biodiversidade – PPBio</a>) <span class="citation">(<a href="#ref-RN2491" role="doc-biblioref">MEDEIROS; SILVA; RAMOS, 2008</a>)</span>. Esses são dados de <strong>variáveis ambientais</strong> distribuidas em diversas unidades amostrais (UA’s ou sítios). Essa é a <strong>matriz bruta de dados</strong>, porque os valores ainda não foram transformados <span class="citation">(<a href="#ref-RN67" role="doc-biblioref">SOKAL; ROHLF, 1995</a>)</span>. Note que as variáveis foram medidas em diferentes unidades (cm, m, °C, mg/L, etc.), com uma alta amplitude de variação, sugerido uso de matriz transformada e/ou reescalada.
Além disso usaremos a <strong>tabela de agrupamentos</strong> (<a href="https://docs.google.com/spreadsheets/d/1H52eBBxZ1k-6Xgrse87etq6mq3mMUTZi/edit?usp=drive_link&amp;ouid=101766125969589673518&amp;rtpof=true&amp;sd=true">ppbio06-grupos</a>).</p>
<p><strong>Revise as informações sobre as bases de dados no Capítulo <a href="bases.html#bases">3</a>. As dases de dados para esse Módulo podem ser baixadam na Seção <a href="bases.html#arqs">3.2</a>.</strong></p>
</div>
<div id="organização-básica-7" class="section level2" number="13.2">
<h2>
<span class="header-section-number">13.2</span> Organização básica<a class="anchor" aria-label="anchor" href="#organiza%C3%A7%C3%A3o-b%C3%A1sica-7"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb352"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span> <span class="co">#apaga os graficos, se houver algum</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span>all<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="co">#limpa a memória</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"\014"</span><span class="op">)</span> <span class="co">#limpa o console </span></span></code></pre></div>
<div id="instalando-os-pacotes-necessários-para-esse-módulo." class="section level3" number="13.2.1">
<h3>
<span class="header-section-number">13.2.1</span> Instalando os pacotes necessários para esse módulo.<a class="anchor" aria-label="anchor" href="#instalando-os-pacotes-necess%C3%A1rios-para-esse-m%C3%B3dulo."><i class="fas fa-link"></i></a>
</h3>
<p>Se você ja fez o módulo anterior, não vai precisar instalar nenhum pacote novo. Os pacotes necessários serão carregados ao longo desse módulo.</p>
<div class="sourceCode" id="cb353"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"psych"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"corrplot"</span><span class="op">)</span></span></code></pre></div>
<p>Agora vamos <strong>definir o diretório de trabalho</strong>. Esse código é usado para obter e definir o diretório de trabalho atual no R. O comando <code><a href="https://rdrr.io/r/base/getwd.html">getwd()</a></code> retorna o caminho do diretório onde o R está lendo e salvando arquivos. O comando <code><a href="https://rdrr.io/r/base/getwd.html">setwd()</a></code> muda esse diretório de trabalho para o caminho especificado entre aspas. No seu caso, você deve ajustar o caminho para o seu próprio diretório de trabalho. <strong>Lembre de usar a barra “/” entre os diretórios. E não a contra-barra “\”.</strong></p>
<div class="sourceCode" id="cb354"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="st">"C:/Seu/Diretório/De/Trabalho"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="importando-a-planilha-6" class="section level2" number="13.3">
<h2>
<span class="header-section-number">13.3</span> Importando a planilha<a class="anchor" aria-label="anchor" href="#importando-a-planilha-6"><i class="fas fa-link"></i></a>
</h2>
<p>Note que o símbolo <span style="color:green"><code>#</code></span> em programação R significa que o texto que vem depois dele é um comentário e não será executado pelo programa. Isso é útil para explicar o código ou deixar anotações.<br>
- Ajuste a primeira linha do código abaixo para refletir <span style="color:blue">“C:/Seu/Diretório/De/Trabalho/Planilha.xlsx”</span>.<br>
- Ajuste o parâmetro <code>sheet = "Sheet1"</code> para refletir a aba correta do arquivo .xlsx a ser importado. Vamos trabalhar com os dados do ano 1.</p>
<div class="sourceCode" id="cb355"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#dir &lt;- getwd() #criamos um vetor com o diretório  de trbalho </span></span>
<span><span class="co">#shell.exec(dir) #abre o diretorio de trabalho no Windows Explorer</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ycphs.github.io/openxlsx/index.html">openxlsx</a></span><span class="op">)</span></span>
<span><span class="va">ppbio</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/openxlsx/man/read.xlsx.html">read.xlsx</a></span><span class="op">(</span><span class="st">"D:/Elvio/OneDrive/Disciplinas/_EcoNumerica/5.Matrizes/ppbio06p-amb.xlsx"</span>,</span>
<span>                   rowNames <span class="op">=</span> <span class="cn">T</span>, colNames <span class="op">=</span> <span class="cn">T</span>,</span>
<span>                   sheet <span class="op">=</span> <span class="st">"ano1"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">ppbio</span><span class="op">)</span></span>
<span><span class="co">#View(ppbio)</span></span>
<span><span class="va">ppbio</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span> <span class="co">#[1:5,1:5] mostra apenas as linhas e colunas de 1 a 5.</span></span></code></pre></div>
<pre><code>## 'data.frame':    23 obs. of  30 variables:
##  $ h.macroph   : num  8.33 0 5.83 0 0 ...
##  $ h.grass     : num  20 23.3 0 20 0 ...
##  $ h.subveg    : num  10 3 16.7 0 0 ...
##  $ h.overhveg  : num  0 26.7 33.3 0 33.3 ...
##  $ h.litter    : num  0.667 2.333 23.667 0 1 ...
##  $ h.filalgae  : num  0 3.33 25 0 0 ...
##  $ h.attalgae  : num  12 0.667 3.333 1 0 ...
##  $ h.roots     : num  0 3.33 0 0 5 ...
##  $ h.lrgdeb    : num  1.67 1.67 0 0 3.33 ...
##  $ h.smldeb    : num  1.67 2 10 0 7 ...
##  $ s.mud       : num  65 16.667 81.667 40 0.667 ...
##  $ s.sand      : num  30 70 8.33 40 87.67 ...
##  $ s.smlgrav   : num  0 5 1.67 0 3.33 ...
##  $ s.lrggrav   : num  0 5 0 0 3.33 ...
##  $ s.cobbles   : num  1.67 3.33 0 20 5 ...
##  $ s.rocks     : num  0 0 0 0 0 ...
##  $ s.bedrock   : num  3.33 0 8.33 0 0 ...
##  $ m.elev      : num  226 169 270 226 169 270 226 169 270 226 ...
##  $ m.river     : num  163 83 110 163 83 ...
##  $ m.stream    : num  163.2 13.6 37.1 163.2 13.6 ...
##  $ m.distsource: num  84.45 6.15 8.85 84.45 6.15 ...
##  $ m.distmouth : num  217 186 255 217 186 ...
##  $ m.maxslope  : num  30 60 60 30 60 60 30 60 60 30 ...
##  $ m.maxdepth  : num  106 60 154 105 68 118 110 79 109 74 ...
##  $ m.habdepth  : num  81.3 22.7 54.7 67 32.7 ...
##  $ m.width     : num  19.6 17.2 102 16.1 18.5 ...
##  $ a.veloc     : num  0.167 0.159 0.1 0.125 0 ...
##  $ a.temp      : num  32.9 35.2 34 32 29 ...
##  $ a.do        : num  6.51 6.86 4.82 5.38 3.02 ...
##  $ a.transp    : num  46 26 61 44 33 ...
##         h.macroph  h.grass h.subveg h.overhveg   h.litter
## S-R-CT1  8.333333 20.00000 10.00000    0.00000  0.6666667
## S-R-CP1  0.000000 23.33333  3.00000   26.66667  2.3333333
## S-A-TA1  5.833333  0.00000 16.66667   33.33333 23.6666660
## S-R-CT2  0.000000 20.00000  0.00000    0.00000  0.0000000
## S-R-CP2  0.000000  0.00000  0.00000   33.33333  1.0000000</code></pre>
<p>Exibindo os dados importados (esses comando são “case-sensitive” <code>ignore.case(object)</code>).</p>
<div class="sourceCode" id="cb357"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#View(ppbio)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">ppbio</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">ppbio</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">ppbio</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mode.html">mode</a></span><span class="op">(</span><span class="va">ppbio</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">ppbio</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="reset-point-2" class="section level2" number="13.4">
<h2>
<span class="header-section-number">13.4</span> Reset point<a class="anchor" aria-label="anchor" href="#reset-point-2"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb358"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m_amb</span> <span class="op">&lt;-</span> <span class="va">ppbio</span></span>
<span><span class="co">#pat &lt;- "^S"</span></span>
<span><span class="co">#m_amb &lt;- m_amb[!grepl(pat, rownames(m_amb)), ] #exclui quem começa com pat</span></span></code></pre></div>
<p>Aqui cria-se um novo objeto do R (<code>m_trab</code>, ou a matriz de trabalho, para esse momento) que substitui a matriz de dados original, por uma nova matriz que pode ser a matriz relativizada, transformada, transposta, etc. Dessa forma, mantemos a matriz de dados original caso precisemos dela novamente (Veja a Tabela <a href="bases.html#tab:200arqs">3.1</a>).</p>
<p><strong>Revise Seção <a href="bases.html#abrev">3.2.2</a> e a Tabela de Abreviações (@ref(tab:200m_2)) na mesma Seção que resumem os tipos de matrizes e suas abreviações, para os nossos códigos.</strong></p>
</div>
<div id="correlograma-e-remoção-de-variáveis-redundantes-ou-desnecessárias" class="section level2" number="13.5">
<h2>
<span class="header-section-number">13.5</span> Correlograma e remoção de variáveis redundantes ou desnecessárias<a class="anchor" aria-label="anchor" href="#correlograma-e-remo%C3%A7%C3%A3o-de-vari%C3%A1veis-redundantes-ou-desnecess%C3%A1rias"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb359"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://personality-project.org/r/psych/">psych</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">m_amb</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/psych/man/pairs.panels.html">pairs.panels</a></span><span class="op">(</span><span class="va">m_amb</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>,</span>
<span>             method <span class="op">=</span> <span class="st">"pearson"</span>, <span class="co"># correlation method</span></span>
<span>             scale <span class="op">=</span> <span class="cn">FALSE</span>, lm <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>             hist.col <span class="op">=</span> <span class="st">"#00AFBB"</span>, pch <span class="op">=</span> <span class="fl">19</span>,</span>
<span>             density <span class="op">=</span> <span class="cn">TRUE</span>,  <span class="co"># show density plots</span></span>
<span>             ellipses <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># show correlation ellipses</span></span>
<span>             alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="va">m_amb</span><span class="op">)</span></span>
<span><span class="va">cor</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/taiyun/corrplot">corrplot</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/corrplot/man/corrplot.html">corrplot</a></span><span class="op">(</span><span class="va">cor</span>, method <span class="op">=</span> <span class="st">"circle"</span><span class="op">)</span></span>
<span><span class="co">#win.print()</span></span>
<span><span class="co">#corrplot(cor, method = "circle")</span></span>
<span><span class="co">#dev.off()</span></span></code></pre></div>
<pre><code>##  [1] "h.macroph"    "h.grass"      "h.subveg"     "h.overhveg"   "h.litter"    
##  [6] "h.filalgae"   "h.attalgae"   "h.roots"      "h.lrgdeb"     "h.smldeb"    
## [11] "s.mud"        "s.sand"       "s.smlgrav"    "s.lrggrav"    "s.cobbles"   
## [16] "s.rocks"      "s.bedrock"    "m.elev"       "m.river"      "m.stream"    
## [21] "m.distsource" "m.distmouth"  "m.maxslope"   "m.maxdepth"   "m.habdepth"  
## [26] "m.width"      "a.veloc"      "a.temp"       "a.do"         "a.transp"    
##                h.macroph      h.grass    h.subveg    h.overhveg     h.litter
## h.macroph     1.00000000 -0.246531504 -0.13690655 -0.0460990189 -0.062637491
## h.grass      -0.24653150  1.000000000  0.48407509 -0.1460764735 -0.001721976
## h.subveg     -0.13690655  0.484075094  1.00000000  0.0635287907  0.399197150
## h.overhveg   -0.04609902 -0.146076474  0.06352879  1.0000000000  0.603643875
## h.litter     -0.06263749 -0.001721976  0.39919715  0.6036438749  1.000000000
## h.filalgae    0.30739321 -0.225737505 -0.06840003  0.3151725645  0.391954687
## h.attalgae   -0.20061743 -0.203856535 -0.15804953 -0.0588612264 -0.074417928
## h.roots      -0.17114523 -0.042846121 -0.12422422  0.7224571129 -0.020670464
## h.lrgdeb      0.03975689  0.517038783 -0.13497524 -0.0002521598 -0.076622164
## h.smldeb     -0.11282416  0.430029457  0.32450367  0.3420275576  0.524639005
## s.mud        -0.02825772 -0.213876066  0.09356431 -0.3318047182  0.081241055
## s.sand        0.10165279  0.290788117 -0.02468805  0.2908755666 -0.108025446
## s.smlgrav     0.02303766 -0.230252599 -0.26591389  0.1532179364  0.008573628
## s.lrggrav     0.05597825 -0.088160779 -0.19524294  0.1761326511 -0.054082053
## s.cobbles    -0.24512665 -0.007205913 -0.15483540  0.0694742877 -0.093430622
## s.rocks      -0.23075335 -0.259155527 -0.21954489 -0.0873692368 -0.121239165
## s.bedrock    -0.03652910 -0.083573123  0.30828355  0.5073656218  0.900953133
## m.elev       -0.08310889  0.403591279  0.35058982 -0.4003114855 -0.131742426
## m.river      -0.23257092  0.335464812  0.24926832 -0.5955683647 -0.242615414
## m.stream     -0.06608660 -0.004596811 -0.07497728 -0.2227767752 -0.096058730
## m.distsource -0.16898179  0.005784151 -0.10079544 -0.2397842969 -0.143925113
## m.distmouth  -0.09461959  0.058821726 -0.01701650 -0.2886438017  0.009362746
## m.maxslope    0.06917689 -0.432093408 -0.28679549  0.2396730909  0.112055941
## m.maxdepth    0.03186630  0.402241943  0.19851159 -0.0016801722  0.489997569
## m.habdepth   -0.18039247 -0.045055633 -0.13643528  0.0703614430  0.206858486
## m.width       0.10609087  0.339661628  0.37489017 -0.2460756693 -0.036647042
## a.veloc      -0.13503225  0.204580859  0.11506415  0.3775858154  0.314867909
## a.temp        0.18273224  0.093689794  0.10708693  0.3872777253  0.376177481
## a.do          0.26259801 -0.202794752 -0.60025144 -0.2351348072 -0.186841357
## a.transp      0.30879962 -0.007818165  0.06381010 -0.0405424177  0.149062804
##                h.filalgae    h.attalgae     h.roots      h.lrgdeb      h.smldeb
## h.macroph     0.307393212 -0.2006174303 -0.17114523  0.0397568923 -0.1128241586
## h.grass      -0.225737505 -0.2038565351 -0.04284612  0.5170387832  0.4300294573
## h.subveg     -0.068400029 -0.1580495292 -0.12422422 -0.1349752429  0.3245036701
## h.overhveg    0.315172564 -0.0588612264  0.72245711 -0.0002521598  0.3420275576
## h.litter      0.391954687 -0.0744179283 -0.02067046 -0.0766221642  0.5246390055
## h.filalgae    1.000000000  0.1650218328 -0.12170792  0.0330671467  0.0566631854
## h.attalgae    0.165021833  1.0000000000 -0.15141029 -0.1110887477 -0.0007226332
## h.roots      -0.121707915 -0.1514102880  1.00000000  0.0359061688  0.1278778876
## h.lrgdeb      0.033067147 -0.1110887477  0.03590617  1.0000000000  0.5126858957
## h.smldeb      0.056663185 -0.0007226332  0.12787789  0.5126858957  1.0000000000
## s.mud        -0.203493831  0.0966629147 -0.45742597 -0.2661041300 -0.1358265852
## s.sand        0.131463557 -0.2065073854  0.42226823  0.3631216979  0.2116433147
## s.smlgrav     0.056355761 -0.2466165417  0.37504581 -0.2178131916 -0.1938969370
## s.lrggrav     0.071026543 -0.2019284184  0.45157180 -0.1064395977 -0.1131217094
## s.cobbles     0.193135679  0.4075488652  0.08813464 -0.1218105205 -0.2307397229
## s.rocks       0.144067566  0.5595435077 -0.15324139 -0.1450923302 -0.0896567456
## s.bedrock     0.338537041 -0.0146391847 -0.09492929 -0.0956520825  0.3503440506
## m.elev       -0.203448440  0.0716487680 -0.36640440  0.2656332571  0.1727891903
## m.river      -0.405669260 -0.0195694902 -0.51853032  0.1309548871 -0.0189887633
## m.stream     -0.185417996 -0.0598126521 -0.21720079 -0.1720191090 -0.1810175388
## m.distsource -0.254533090 -0.0572352576 -0.18429493 -0.1776252995 -0.2083808690
## m.distmouth  -0.217780469 -0.2330343386 -0.33511609  0.1038897654  0.0767920775
## m.maxslope    0.145284072 -0.1601113205  0.18673984 -0.1907894213 -0.1808970343
## m.maxdepth    0.114574709 -0.2474674119 -0.35179352  0.5122182964  0.6060301921
## m.habdepth    0.002882856  0.0164745166 -0.09468290  0.0036984721  0.0212264396
## m.width      -0.011447418  0.0797573366 -0.28844323  0.2562191774  0.1713597968
## a.veloc      -0.002302649 -0.0605797247  0.20772262 -0.1007706522 -0.0883913083
## a.temp       -0.047385170 -0.3528557182  0.21266182 -0.0633115802  0.0495255921
## a.do          0.075932799  0.2107159895 -0.19965987 -0.0527554510 -0.2305667359
## a.transp      0.486443594  0.1991293428 -0.26299621  0.2727840805  0.2437019444
##                    s.mud      s.sand    s.smlgrav   s.lrggrav    s.cobbles
## h.macroph    -0.02825772  0.10165279  0.023037659  0.05597825 -0.245126650
## h.grass      -0.21387607  0.29078812 -0.230252599 -0.08816078 -0.007205913
## h.subveg      0.09356431 -0.02468805 -0.265913890 -0.19524294 -0.154835404
## h.overhveg   -0.33180472  0.29087557  0.153217936  0.17613265  0.069474288
## h.litter      0.08124106 -0.10802545  0.008573628 -0.05408205 -0.093430622
## h.filalgae   -0.20349383  0.13146356  0.056355761  0.07102654  0.193135679
## h.attalgae    0.09666291 -0.20650739 -0.246616542 -0.20192842  0.407548865
## h.roots      -0.45742597  0.42226823  0.375045814  0.45157180  0.088134635
## h.lrgdeb     -0.26610413  0.36312170 -0.217813192 -0.10643960 -0.121810520
## h.smldeb     -0.13582659  0.21164331 -0.193896937 -0.11312171 -0.230739723
## s.mud         1.00000000 -0.95732831 -0.196136235 -0.20727196 -0.436951580
## s.sand       -0.95732831  1.00000000  0.077601964  0.06113988  0.208220232
## s.smlgrav    -0.19613624  0.07760196  1.000000000  0.91794933 -0.018580075
## s.lrggrav    -0.20727196  0.06113988  0.917949325  1.00000000  0.092736437
## s.cobbles    -0.43695158  0.20822023 -0.018580075  0.09273644  1.000000000
## s.rocks      -0.05450604 -0.08712170 -0.290187186 -0.20917141  0.471919983
## s.bedrock     0.20788751 -0.23158686 -0.068825165 -0.12957657 -0.117937719
## m.elev        0.46647761 -0.31506556 -0.363536747 -0.35844427 -0.418891510
## m.river       0.52267706 -0.35870643 -0.487625688 -0.54998626 -0.404162728
## m.stream      0.25913400 -0.29280195 -0.351718673 -0.23344861  0.162336709
## m.distsource  0.20798419 -0.24660914 -0.335764568 -0.23558448  0.197820570
## m.distmouth  -0.12783195  0.26298990 -0.055199753 -0.33221276 -0.343006017
## m.maxslope   -0.48822579  0.47051421  0.480231912  0.19989479  0.003285850
## m.maxdepth   -0.08984828  0.15690152 -0.233610098 -0.23813743 -0.181918712
## m.habdepth   -0.29918013  0.24152725 -0.124634583 -0.20123580  0.329637349
## m.width       0.49913277 -0.37568825 -0.310246711 -0.23740245 -0.381602616
## a.veloc      -0.07881376  0.02561095 -0.011480476  0.04477510  0.201826380
## a.temp       -0.20642510  0.16196759  0.223976700  0.27319038  0.054683155
## a.do          0.29936318 -0.31184728  0.228246923  0.14674375 -0.188261015
## a.transp     -0.07274786  0.08367750 -0.090575822 -0.07405382  0.010898759
##                   s.rocks   s.bedrock      m.elev     m.river     m.stream
## h.macroph    -0.230753352 -0.03652910 -0.08310889 -0.23257092 -0.066086599
## h.grass      -0.259155527 -0.08357312  0.40359128  0.33546481 -0.004596811
## h.subveg     -0.219544891  0.30828355  0.35058982  0.24926832 -0.074977285
## h.overhveg   -0.087369237  0.50736562 -0.40031149 -0.59556836 -0.222776775
## h.litter     -0.121239165  0.90095313 -0.13174243 -0.24261541 -0.096058730
## h.filalgae    0.144067566  0.33853704 -0.20344844 -0.40566926 -0.185417996
## h.attalgae    0.559543508 -0.01463918  0.07164877 -0.01956949 -0.059812652
## h.roots      -0.153241391 -0.09492929 -0.36640440 -0.51853032 -0.217200787
## h.lrgdeb     -0.145092330 -0.09565208  0.26563326  0.13095489 -0.172019109
## h.smldeb     -0.089656746  0.35034405  0.17278919 -0.01898876 -0.181017539
## s.mud        -0.054506037  0.20788751  0.46647761  0.52267706  0.259134004
## s.sand       -0.087121705 -0.23158686 -0.31506556 -0.35870643 -0.292801947
## s.smlgrav    -0.290187186 -0.06882517 -0.36353675 -0.48762569 -0.351718673
## s.lrggrav    -0.209171407 -0.12957657 -0.35844427 -0.54998626 -0.233448612
## s.cobbles     0.471919983 -0.11793772 -0.41889151 -0.40416273  0.162336709
## s.rocks       1.000000000 -0.12799218 -0.21907348 -0.13545807  0.215737335
## s.bedrock    -0.127992185  1.00000000 -0.19742578 -0.20071090  0.131806173
## m.elev       -0.219073482 -0.19742578  1.00000000  0.85251041 -0.351025053
## m.river      -0.135458068 -0.20071090  0.85251041  1.00000000  0.017040248
## m.stream      0.215737335  0.13180617 -0.35102505  0.01704025  1.000000000
## m.distsource  0.248398309  0.08398842 -0.36628911  0.04500187  0.987553629
## m.distmouth  -0.128592531 -0.03694612  0.21088433  0.43005863 -0.285305822
## m.maxslope   -0.063334534  0.04208746 -0.45271956 -0.37494422 -0.445502469
## m.maxdepth   -0.078095404  0.47564528  0.08022982  0.12595144  0.094085376
## m.habdepth    0.133210844  0.41315901 -0.52848500 -0.21000817  0.395997655
## m.width      -0.267413674 -0.09980488  0.92959448  0.66160089 -0.341120113
## a.veloc      -0.203924152  0.50163597 -0.39264584 -0.27533927  0.410516289
## a.temp       -0.221454717  0.41538130 -0.60522317 -0.50743529  0.318565681
## a.do          0.004835464 -0.06655234 -0.04245875 -0.05281226  0.104875559
## a.transp     -0.016360295  0.14038232  0.16444871 -0.08762683 -0.339047044
##              m.distsource  m.distmouth   m.maxslope   m.maxdepth   m.habdepth
## h.macroph    -0.168981791 -0.094619591  0.069176887  0.031866297 -0.180392470
## h.grass       0.005784151  0.058821726 -0.432093408  0.402241943 -0.045055633
## h.subveg     -0.100795436 -0.017016500 -0.286795491  0.198511591 -0.136435275
## h.overhveg   -0.239784297 -0.288643802  0.239673091 -0.001680172  0.070361443
## h.litter     -0.143925113  0.009362746  0.112055941  0.489997569  0.206858486
## h.filalgae   -0.254533090 -0.217780469  0.145284072  0.114574709  0.002882856
## h.attalgae   -0.057235258 -0.233034339 -0.160111320 -0.247467412  0.016474517
## h.roots      -0.184294932 -0.335116093  0.186739840 -0.351793522 -0.094682904
## h.lrgdeb     -0.177625299  0.103889765 -0.190789421  0.512218296  0.003698472
## h.smldeb     -0.208380869  0.076792078 -0.180897034  0.606030192  0.021226440
## s.mud         0.207984189 -0.127831955 -0.488225793 -0.089848279 -0.299180125
## s.sand       -0.246609145  0.262989896  0.470514210  0.156901516  0.241527247
## s.smlgrav    -0.335764568 -0.055199753  0.480231912 -0.233610098 -0.124634583
## s.lrggrav    -0.235584477 -0.332212758  0.199894791 -0.238137430 -0.201235803
## s.cobbles     0.197820570 -0.343006017  0.003285850 -0.181918712  0.329637349
## s.rocks       0.248398309 -0.128592531 -0.063334534 -0.078095404  0.133210844
## s.bedrock     0.083988424 -0.036946118  0.042087459  0.475645280  0.413159010
## m.elev       -0.366289105  0.210884333 -0.452719558  0.080229817 -0.528485000
## m.river       0.045001873  0.430058635 -0.374944223  0.125951443 -0.210008174
## m.stream      0.987553629 -0.285305822 -0.445502469  0.094085376  0.395997655
## m.distsource  1.000000000 -0.208886217 -0.380287859  0.070018120  0.454126171
## m.distmouth  -0.208886217  1.000000000  0.575655522  0.409794260  0.329568908
## m.maxslope   -0.380287859  0.575655522  1.000000000 -0.033910389  0.326367540
## m.maxdepth    0.070018120  0.409794260 -0.033910389  1.000000000  0.425648040
## m.habdepth    0.454126171  0.329568908  0.326367540  0.425648040  1.000000000
## m.width      -0.403406954 -0.091476026 -0.569731109  0.010919605 -0.663930169
## a.veloc       0.409162331 -0.251728578 -0.087772483  0.109911454  0.516555276
## a.temp        0.303332037 -0.107191864  0.190578794  0.204458211  0.390454228
## a.do          0.054863239 -0.066103944 -0.039194058 -0.068299977 -0.098869325
## a.transp     -0.402578165  0.084213818  0.008475289  0.389325169  0.109987158
##                   m.width      a.veloc      a.temp         a.do     a.transp
## h.macroph     0.106090873 -0.135032245  0.18273224  0.262598008  0.308799625
## h.grass       0.339661628  0.204580859  0.09368979 -0.202794752 -0.007818165
## h.subveg      0.374890169  0.115064150  0.10708693 -0.600251445  0.063810096
## h.overhveg   -0.246075669  0.377585815  0.38727773 -0.235134807 -0.040542418
## h.litter     -0.036647042  0.314867909  0.37617748 -0.186841357  0.149062804
## h.filalgae   -0.011447418 -0.002302649 -0.04738517  0.075932799  0.486443594
## h.attalgae    0.079757337 -0.060579725 -0.35285572  0.210715990  0.199129343
## h.roots      -0.288443233  0.207722616  0.21266182 -0.199659873 -0.262996213
## h.lrgdeb      0.256219177 -0.100770652 -0.06331158 -0.052755451  0.272784080
## h.smldeb      0.171359797 -0.088391308  0.04952559 -0.230566736  0.243701944
## s.mud         0.499132769 -0.078813761 -0.20642510  0.299363179 -0.072747855
## s.sand       -0.375688250  0.025610951  0.16196759 -0.311847278  0.083677500
## s.smlgrav    -0.310246711 -0.011480476  0.22397670  0.228246923 -0.090575822
## s.lrggrav    -0.237402453  0.044775100  0.27319038  0.146743753 -0.074053824
## s.cobbles    -0.381602616  0.201826380  0.05468315 -0.188261015  0.010898759
## s.rocks      -0.267413674 -0.203924152 -0.22145472  0.004835464 -0.016360295
## s.bedrock    -0.099804876  0.501635966  0.41538130 -0.066552340  0.140382315
## m.elev        0.929594477 -0.392645839 -0.60522317 -0.042458750  0.164448713
## m.river       0.661600887 -0.275339274 -0.50743529 -0.052812259 -0.087626835
## m.stream     -0.341120113  0.410516289  0.31856568  0.104875559 -0.339047044
## m.distsource -0.403406954  0.409162331  0.30333204  0.054863239 -0.402578165
## m.distmouth  -0.091476026 -0.251728578 -0.10719186 -0.066103944  0.084213818
## m.maxslope   -0.569731109 -0.087772483  0.19057879 -0.039194058  0.008475289
## m.maxdepth    0.010919605  0.109911454  0.20445821 -0.068299977  0.389325169
## m.habdepth   -0.663930169  0.516555276  0.39045423 -0.098869325  0.109987158
## m.width       1.000000000 -0.326799203 -0.51641177 -0.002086238  0.232399977
## a.veloc      -0.326799203  1.000000000  0.64196801  0.063666386 -0.111321669
## a.temp       -0.516411771  0.641968008  1.00000000 -0.072530252 -0.241797672
## a.do         -0.002086238  0.063666386 -0.07253025  1.000000000  0.109896052
## a.transp      0.232399977 -0.111321669 -0.24179767  0.109896052  1.000000000</code></pre>
<p><img src="fundamentos_de_ecologia_numerica_files/figure-html/unnamed-chunk-153-1.png" width="672"><img src="fundamentos_de_ecologia_numerica_files/figure-html/unnamed-chunk-153-2.png" width="672"></p>
</div>
<div id="deletando-variáveis-colineares" class="section level2" number="13.6">
<h2>
<span class="header-section-number">13.6</span> Deletando variáveis colineares<a class="anchor" aria-label="anchor" href="#deletando-vari%C3%A1veis-colineares"><i class="fas fa-link"></i></a>
</h2>
<p>Primeiro vamos listar as variáveis com correlação maior que 70% ou r &gt; 0.7.</p>
<div class="sourceCode" id="cb361"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get upper triangle (to avoid duplicate pairs)</span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fl">0.7</span></span>
<span><span class="va">cor_pairs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">cor</span><span class="op">)</span> <span class="op">&gt;</span> <span class="va">r</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">cor</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">1</span>, arr.ind <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract unique variable pairs</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  var1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">cor</span><span class="op">)</span><span class="op">[</span><span class="va">cor_pairs</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  var2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">cor</span><span class="op">)</span><span class="op">[</span><span class="va">cor_pairs</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  correlation <span class="op">=</span> <span class="va">cor</span><span class="op">[</span><span class="va">cor_pairs</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Remove duplicates (e.g. A-B and B-A)</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="va">results</span><span class="op">[</span><span class="va">results</span><span class="op">$</span><span class="va">var1</span> <span class="op">&lt;</span> <span class="va">results</span><span class="op">$</span><span class="va">var2</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># Sort by absolute correlation (descending)</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="va">results</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">results</span><span class="op">$</span><span class="va">correlation</span><span class="op">)</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="va">results</span></span></code></pre></div>
<pre><code>##            var1      var2 correlation
## 12 m.distsource  m.stream   0.9875536
## 5         s.mud    s.sand  -0.9573283
## 14       m.elev   m.width   0.9295945
## 6     s.lrggrav s.smlgrav   0.9179493
## 8      h.litter s.bedrock   0.9009531
## 11       m.elev   m.river   0.8525104
## 3    h.overhveg   h.roots   0.7224571</code></pre>
<p>Agora que temos as variáveis correlacionadas, prosseguimos para deleta-las.</p>
<div class="sourceCode" id="cb363"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">m_amb</span><span class="op">)</span></span>
<span><span class="va">del_cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"m.distsource"</span>, <span class="st">"m.elev"</span><span class="op">)</span> <span class="co">#exemplo, "g.river_length","g.altitude"</span></span>
<span><span class="va">m_amb_part</span> <span class="op">&lt;-</span> <span class="va">m_amb</span><span class="op">[</span>, <span class="op">!</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">m_amb</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">del_cols</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code>##  [1] "h.macroph"    "h.grass"      "h.subveg"     "h.overhveg"   "h.litter"    
##  [6] "h.filalgae"   "h.attalgae"   "h.roots"      "h.lrgdeb"     "h.smldeb"    
## [11] "s.mud"        "s.sand"       "s.smlgrav"    "s.lrggrav"    "s.cobbles"   
## [16] "s.rocks"      "s.bedrock"    "m.elev"       "m.river"      "m.stream"    
## [21] "m.distsource" "m.distmouth"  "m.maxslope"   "m.maxdepth"   "m.habdepth"  
## [26] "m.width"      "a.veloc"      "a.temp"       "a.do"         "a.transp"</code></pre>
</div>
<div id="somando-variáveis-redundantes" class="section level2" number="13.7">
<h2>
<span class="header-section-number">13.7</span> Somando variáveis redundantes<a class="anchor" aria-label="anchor" href="#somando-vari%C3%A1veis-redundantes"><i class="fas fa-link"></i></a>
</h2>
<p>Algumas dessa variáveis são redundantes, vamos soma-las.</p>
<div class="sourceCode" id="cb365"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m_amb_part</span><span class="op">$</span><span class="va">s.gravel</span> <span class="op">&lt;-</span> <span class="va">m_amb_part</span><span class="op">$</span><span class="va">s.smlgrav</span> <span class="op">+</span> <span class="va">m_amb_part</span><span class="op">$</span><span class="va">s.lrggrav</span> <span class="op">+</span> <span class="va">m_amb_part</span><span class="op">$</span><span class="va">s.cobbles</span></span>
<span><span class="va">m_amb_part</span> <span class="op">&lt;-</span> <span class="va">m_amb_part</span><span class="op">[</span>, <span class="op">!</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">m_amb_part</span><span class="op">)</span></span>
<span>                             <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"s.smlgrav"</span>, <span class="st">"s.lrggrav"</span>, <span class="st">"s.cobbles"</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">m_amb_part</span><span class="op">$</span><span class="va">s.rock</span> <span class="op">&lt;-</span> <span class="va">m_amb_part</span><span class="op">$</span><span class="va">s.rocks</span> <span class="op">+</span> <span class="va">m_amb_part</span><span class="op">$</span><span class="va">s.bedrock</span></span>
<span><span class="va">m_amb_part</span> <span class="op">&lt;-</span> <span class="va">m_amb_part</span><span class="op">[</span>, <span class="op">!</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">m_amb_part</span><span class="op">)</span></span>
<span>                             <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"s.rocks"</span>, <span class="st">"s.bedrock"</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">m_amb_part</span><span class="op">$</span><span class="va">h.algae</span> <span class="op">&lt;-</span> <span class="va">m_amb_part</span><span class="op">$</span><span class="va">h.filalgae</span> <span class="op">+</span> <span class="va">m_amb_part</span><span class="op">$</span><span class="va">h.attalgae</span></span>
<span><span class="va">m_amb_part</span> <span class="op">&lt;-</span> <span class="va">m_amb_part</span><span class="op">[</span>, <span class="op">!</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">m_amb_part</span><span class="op">)</span></span>
<span>                             <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"h.filalgae"</span>, <span class="st">"h.attalgae"</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">m_amb_part</span><span class="op">$</span><span class="va">h.debris</span> <span class="op">&lt;-</span> <span class="va">m_amb_part</span><span class="op">$</span><span class="va">h.smldeb</span> <span class="op">+</span> <span class="va">m_amb_part</span><span class="op">$</span><span class="va">h.lrgdeb</span></span>
<span><span class="va">m_amb_part</span> <span class="op">&lt;-</span> <span class="va">m_amb_part</span><span class="op">[</span>, <span class="op">!</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">m_amb_part</span><span class="op">)</span></span>
<span>                             <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"h.smldeb"</span>, <span class="st">"h.lrgdeb"</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">m_amb_part</span><span class="op">)</span></span>
<span><span class="va">m_amb_part</span></span></code></pre></div>
<pre><code>##  [1] "h.macroph"   "h.grass"     "h.subveg"    "h.overhveg"  "h.litter"   
##  [6] "h.roots"     "s.mud"       "s.sand"      "m.river"     "m.stream"   
## [11] "m.distmouth" "m.maxslope"  "m.maxdepth"  "m.habdepth"  "m.width"    
## [16] "a.veloc"     "a.temp"      "a.do"        "a.transp"    "s.gravel"   
## [21] "s.rock"      "h.algae"     "h.debris"   
##         h.macroph    h.grass  h.subveg h.overhveg   h.litter  h.roots
## S-R-CT1  8.333333 20.0000000 10.000000   0.000000  0.6666667 0.000000
## S-R-CP1  0.000000 23.3333340  3.000000  26.666666  2.3333333 3.333333
## S-A-TA1  5.833333  0.0000000 16.666666  33.333332 23.6666660 0.000000
## S-R-CT2  0.000000 20.0000000  0.000000   0.000000  0.0000000 0.000000
## S-R-CP2  0.000000  0.0000000  0.000000  33.333332  1.0000000 5.000000
## S-A-TA2 54.833332  0.3333333  0.000000   8.333333  1.0000000 0.000000
## S-R-CT3  0.000000  0.1111111  0.000000   0.000000  0.0000000 0.000000
## S-R-CP3  0.000000  0.0000000  0.000000   0.000000  1.5000000 1.000000
## S-A-TA3 44.629631  8.1111107  0.000000   0.000000  0.6666667 0.000000
## S-R-CT4  0.000000  4.1666665  0.000000   0.000000  0.8333333 0.000000
## S-R-CP4  0.000000  0.0000000  0.000000   8.333333  1.0000000 0.000000
## S-A-TA4 37.309525  0.0000000  0.000000   0.000000  0.5714286 0.000000
## B-A-MU1  0.000000 50.0000000  0.000000   0.000000  1.0000000 0.000000
## B-A-GU1 46.666668  0.0000000  3.333333   3.333333  0.0000000 0.000000
## B-R-PC2  0.000000  2.0000000  0.000000   0.000000  0.4000000 0.000000
## B-A-MU2  0.000000 54.0000000 36.599998   0.000000  5.0000000 0.000000
## B-A-GU2  2.600000  7.5000000 26.000000   0.400000  0.0000000 0.000000
## B-R-PC3  0.000000  0.0000000  0.000000   0.000000  0.3333333 0.000000
## B-A-MU3  0.000000 28.3333340  8.333333   0.000000  1.0000000 0.000000
## B-A-GU3  0.000000 13.3333330  0.000000   0.000000  0.0000000 0.000000
## B-R-PC4  0.000000  0.0000000  0.000000   0.000000  0.5000000 0.000000
## B-A-MU4  0.000000  5.5555553  0.000000   0.000000  0.4444444 0.000000
## B-A-GU4  2.083333  0.0000000  0.000000   0.000000  0.0000000 0.000000
##              s.mud    s.sand  m.river  m.stream m.distmouth m.maxslope
## S-R-CT1 65.0000000 30.000000 163.2000 163.20000    217.1500         30
## S-R-CP1 16.6666660 70.000000  83.0500  13.55000    185.5500         60
## S-A-TA1 81.6666641  8.333333 110.2000  37.10000    254.5500         60
## S-R-CT2 40.0000000 40.000000 163.2000 163.20000    217.1500         30
## S-R-CP2  0.6666667 87.666664  83.0500  13.55000    185.5500         60
## S-A-TA2  5.0000000 95.000000 110.2000  37.10000    254.5500         60
## S-R-CT3 65.5555573 23.111111 163.2000 163.20000    217.1500         30
## S-R-CP3 48.7500000 22.500000  83.0500  13.55000    185.5500         60
## S-A-TA3 46.6666679 40.000000 110.2000  37.10000    254.5500         60
## S-R-CT4 95.0000000  1.833333 163.2000 163.20000    217.1500         30
## S-R-CP4  5.0000000 60.000000  83.0500  13.55000    185.5500         60
## S-A-TA4 59.1428566 38.714287 110.2000  37.10000    254.5500         60
## B-A-MU1 33.3333321 65.000000 214.0200  19.83333    290.8767         30
## B-A-GU1 96.6666641  3.333333 212.6667  32.33333    203.8333         30
## B-R-PC2 39.0000000 56.000000 196.8333  13.75000    401.6667         90
## B-A-MU2 20.6000004 77.000000 214.0200  19.83333    290.8767         30
## B-A-GU2 98.0000000  2.000000 212.6667  32.33333    203.8333         30
## B-R-PC3 33.6666679 63.000000 196.8333  13.75000    401.6667         90
## B-A-MU3 65.0000000 35.000000 214.0200  19.83333    290.8767         30
## B-A-GU3 87.7777786  6.666667 212.6667  32.33333    203.8333         30
## B-R-PC4 48.8750000 47.875000 196.8333  13.75000    401.6667         90
## B-A-MU4 91.7777786  3.222222 214.0200  19.83333    290.8767         30
## B-A-GU4 95.1666641  3.416667 212.6667  32.33333    203.8333         30
##         m.maxdepth m.habdepth m.width   a.veloc   a.temp     a.do a.transp
## S-R-CT1        106  81.333333   19.64 0.1666667 32.90000 6.510000 46.00000
## S-R-CP1         60  22.666667   17.24 0.1591512 35.20000 6.863333 26.00000
## S-A-TA1        154  54.666667  102.00 0.1000000 34.00000 4.820000 61.00000
## S-R-CT2        105  67.000000   16.10 0.1250000 32.00000 5.375000 44.00000
## S-R-CP2         68  32.666667   18.47 0.0000000 29.00000 3.015000 33.00000
## S-A-TA2        118  37.666667  100.00 0.0000000 29.00000 5.000000 90.00000
## S-R-CT3        110  32.333333    6.20 0.0000000 28.26667 6.000000 17.33333
## S-R-CP3         79  32.666667   15.10 0.0000000 29.66667 5.000000 50.33333
## S-A-TA3        109  22.333333   88.00 0.0000000 34.00000 9.000000 51.66667
## S-R-CT4         74  32.333333    5.40 0.0000000 32.60000 6.000000 16.00000
## S-R-CP4         64  45.333333   10.70 0.0000000 27.60000 4.900000 60.00000
## S-A-TA4         87  30.333333   72.20 0.0000000 29.53333 9.433333 67.00000
## B-A-MU1        152  32.666667  270.00 0.0000000 29.83333 5.666667 48.00000
## B-A-GU1         60   8.166667  330.00 0.0000000 29.23333 5.136667 25.66667
## B-R-PC2        110  49.333333   29.60 0.0000000 29.00000 5.635000 50.00000
## B-A-MU2        115  22.000000  247.63 0.0000000 29.00000 1.815000 43.00000
## B-A-GU2         69   7.000000  321.00 0.0000000 29.00000 1.850000 55.00000
## B-R-PC3         80  50.000000   27.30 0.0000000 29.00000 5.000000 32.33333
## B-A-MU3        117  25.666667  234.53 0.0000000 26.00000 5.700000 63.00000
## B-A-GU3         68   6.833333  314.20 0.0000000 24.00000 8.800000 51.66667
## B-R-PC4         95  52.833333   20.00 0.0000000 28.85000 5.100000 30.00000
## B-A-MU4        112  41.333333  239.00 0.0000000 25.95000 7.300000 89.00000
## B-A-GU4         63   4.666667  289.50 0.0000000 24.70000 8.750000 36.00000
##           s.gravel    s.rock    h.algae   h.debris
## S-R-CT1  1.6666666  3.333333 12.0000000  3.3333333
## S-R-CP1 13.3333333  0.000000  3.9999999  3.6666666
## S-A-TA1  1.6666666  8.333333 28.3333333 10.0000000
## S-R-CT2 20.0000000  0.000000  1.0000000  0.0000000
## S-R-CP2 11.6666665  0.000000  0.0000000 10.3333333
## S-A-TA2  0.0000000  0.000000 33.3333321 13.6666665
## S-R-CT3  3.0000000  8.333333  0.0000000  2.2222223
## S-R-CP3 28.7500000  0.000000  6.7500000  3.6666667
## S-A-TA3 13.3333330  0.000000  9.0000000  1.6666666
## S-R-CT4  0.3333333  2.833333  7.5000000  5.0000000
## S-R-CP4 25.0000000 10.000000 75.0000000  1.0000000
## S-A-TA4  2.1428571  0.000000  0.0000000  3.2857144
## B-A-MU1  1.6666666  0.000000  1.0000000 30.0000000
## B-A-GU1  0.0000000  0.000000  0.0000000  0.0000000
## B-R-PC2  4.0000000  1.000000  0.4000000  0.4000000
## B-A-MU2  2.4000001  0.000000  0.0000000 10.0000000
## B-A-GU2  0.0000000  0.000000  1.0000000  0.0000000
## B-R-PC3  3.3333333  0.000000  0.0000000  0.4444444
## B-A-MU3  0.0000000  0.000000  0.3333333 11.6666665
## B-A-GU3  5.5555556  0.000000 25.0000000  0.0000000
## B-R-PC4  2.0000000  1.250000  0.0000000  2.5000000
## B-A-MU4  0.0000000  5.000000 30.0000000 10.4444447
## B-A-GU4  1.4166667  0.000000 43.3333333  3.7500000</code></pre>
<p>Salvando a matriz final particionada de dados ambientais.</p>
<div class="sourceCode" id="cb367"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.table</a></span><span class="op">(</span><span class="va">m_amb_part</span>, <span class="st">"m_amb_part.csv"</span>,</span>
<span>            sep <span class="op">=</span> <span class="st">";"</span>, dec <span class="op">=</span> <span class="st">"."</span>, <span class="co">#"\t",</span></span>
<span>            row.names <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>            quote <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>            append <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">m_amb_part</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"m_amb_part.csv"</span>,</span>
<span>                  sep <span class="op">=</span> <span class="st">";"</span>, dec <span class="op">=</span> <span class="st">"."</span>,</span>
<span>                  row.names <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                  header <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                  na.strings <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="tabela-de-dados-ambientais" class="section level2" number="13.8">
<h2>
<span class="header-section-number">13.8</span> Tabela de dados ambientais<a class="anchor" aria-label="anchor" href="#tabela-de-dados-ambientais"><i class="fas fa-link"></i></a>
</h2>
<p>Nessa etapa precisaremos da tabela de grupos. Selecionamos a aba <code>ambientalp</code>, porque nela constam os agrupamentos <em>a-priori</em> para os dados ambientais.</p>
<div class="sourceCode" id="cb368"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ycphs.github.io/openxlsx/index.html">openxlsx</a></span><span class="op">)</span></span>
<span><span class="va">t_grps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/openxlsx/man/read.xlsx.html">read.xlsx</a></span><span class="op">(</span><span class="st">"D:/Elvio/OneDrive/Disciplinas/_EcoNumerica/5.Matrizes/ppbio06-grupos.xlsx"</span>,</span>
<span>                   rowNames <span class="op">=</span> <span class="cn">T</span>, colNames <span class="op">=</span> <span class="cn">T</span>,</span>
<span>                   sheet <span class="op">=</span> <span class="st">"ambientalp"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">t_grps</span><span class="op">)</span></span>
<span><span class="co">#View(ppbio)</span></span>
<span><span class="va">t_grps</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span> <span class="co">#[1:4,1:4] mostra apenas as linhas e colunas de 1 a 4.</span></span></code></pre></div>
<pre><code>## 'data.frame':    23 obs. of  4 variables:
##  $ area    : chr  "Serido" "Serido" "Serido" "Serido" ...
##  $ ambiente: chr  "rio" "rio" "acude" "rio" ...
##  $ UA      : chr  "CT" "CP" "TA" "CT" ...
##  $ coleta  : num  1 1 1 2 2 2 3 3 3 4 ...
##           area ambiente UA coleta
## S-R-CT1 Serido      rio CT      1
## S-R-CP1 Serido      rio CP      1
## S-A-TA1 Serido    acude TA      1
## S-R-CT2 Serido      rio CT      2</code></pre>
<div class="sourceCode" id="cb370"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span></span>
<span><span class="va">m_trab</span> <span class="op">&lt;-</span> <span class="va">m_amb_part</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename_with</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"_"</span>, <span class="st">"."</span>, <span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="co">#apenas troquei o underscore pelo ponto. </span></span>
<span></span>
<span><span class="va">m</span> <span class="op">&lt;-</span> <span class="va">m_trab</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span>Area <span class="op">=</span> <span class="va">t_grps</span><span class="op">$</span><span class="va">area</span>,</span>
<span>           Habitat <span class="op">=</span> <span class="va">t_grps</span><span class="op">$</span><span class="va">ambiente</span>,</span>
<span>           Ponto <span class="op">=</span> <span class="va">t_grps</span><span class="op">$</span><span class="va">UA</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/where.html">where</a></span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>,</span>
<span>                   <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="va">mean</span>, min <span class="op">=</span> <span class="va">min</span>, max <span class="op">=</span> <span class="va">max</span><span class="op">)</span><span class="op">)</span>,</span>
<span>            .groups <span class="op">=</span> <span class="st">'drop'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">Area</span>, <span class="va">Habitat</span>, <span class="va">Ponto</span><span class="op">)</span>,</span>
<span>    names_to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Variable"</span>, <span class="st">".value"</span><span class="op">)</span>,</span>
<span>    names_sep <span class="op">=</span> <span class="st">"_"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span>
<span><span class="va">m_wide</span> <span class="op">&lt;-</span> <span class="va">m</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>stat_string <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">Variable</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fq.w.vel"</span><span class="op">)</span>,</span>
<span>                              <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">mean</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"("</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">min</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"-"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">max</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">")"</span><span class="op">)</span>,</span>
<span>                              <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">mean</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"("</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">min</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"-"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">max</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">")"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unite.html">unite</a></span><span class="op">(</span><span class="st">"Location"</span>, <span class="va">Area</span>, <span class="va">Habitat</span>, <span class="va">Ponto</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">Variable</span>, <span class="va">Location</span>, <span class="va">stat_string</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># find("select"), dplyr::select evita conflito entre package:MASS  package:dplyr</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">Location</span>, values_from <span class="op">=</span> <span class="va">stat_string</span><span class="op">)</span></span>
<span></span>
<span><span class="va">m_wide</span></span>
<span><span class="va">m_wide</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">m_wide</span><span class="op">)</span></span>
<span><span class="va">m_wide</span></span>
<span></span>
<span><span class="co">#Exportando dados para Excel----</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ycphs.github.io/openxlsx/index.html">openxlsx</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/openxlsx/man/write.xlsx.html">write.xlsx</a></span><span class="op">(</span><span class="va">m_wide</span>, file <span class="op">=</span> <span class="st">"tabela de habitat.xlsx"</span>, rowNames <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">wb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/openxlsx/man/loadWorkbook.html">loadWorkbook</a></span><span class="op">(</span><span class="st">"tabela de habitat.xlsx"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/openxlsx/man/writeData.html">writeData</a></span><span class="op">(</span><span class="va">wb</span>, sheet <span class="op">=</span> <span class="st">"Sheet 1"</span>, x <span class="op">=</span> <span class="va">m_wide</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/openxlsx/man/saveWorkbook.html">saveWorkbook</a></span><span class="op">(</span><span class="va">wb</span>, <span class="st">"tabela de habitat.xlsx"</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Escolher sumário de uma variavel----</span></span>
<span><span class="va">m</span></span>
<span><span class="va">var</span> <span class="op">&lt;-</span> <span class="st">"h.roots"</span></span>
<span><span class="va">m</span><span class="op">[</span><span class="va">m</span><span class="op">$</span><span class="va">Variable</span> <span class="op">==</span> <span class="va">var</span>, <span class="st">"mean"</span><span class="op">]</span> <span class="co">#cada valor de var</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">m</span><span class="op">[</span><span class="va">m</span><span class="op">$</span><span class="va">Variable</span> <span class="op">==</span> <span class="va">var</span>, <span class="st">"mean"</span><span class="op">]</span><span class="op">)</span> <span class="co">#sumário dos valores de var</span></span>
<span></span>
<span><span class="co">#Escolher sumário de um grupo de variáveis do df m----</span></span>
<span><span class="va">vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"^h\\."</span>, <span class="va">m</span><span class="op">$</span><span class="va">Variable</span>, value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">summaries</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span> <span class="co">#criam uma lista vazia para guardar os sumários</span></span>
<span><span class="co"># Loop para cada variável do grupo e guarda em summaries</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">var</span> <span class="kw">in</span> <span class="va">vars</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">summaries</span><span class="op">[[</span><span class="va">var</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">m</span><span class="op">[</span><span class="va">m</span><span class="op">$</span><span class="va">Variable</span> <span class="op">==</span> <span class="va">var</span>, <span class="st">"mean"</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co"># var is a temporary variable used in the for loop to iterate through</span></span>
<span><span class="co"># each variable name that starts with "h."</span></span>
<span></span>
<span><span class="va">summaries</span></span>
<span><span class="va">summary_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">summaries</span>, <span class="va">as.data.frame.list</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">summary_table</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#sink(file = "summary_h.txt", split = TRUE)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">summary_table</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">summary_table</span><span class="op">$</span><span class="va">Mean</span>, decreasing <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>, <span class="op">]</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#sink()</span></span>
<span></span>
<span><span class="co">#Tabela limpa</span></span>
<span><span class="va">summary_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span>Variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">summary_table</span><span class="op">)</span>, <span class="va">summary_table</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">summary_table</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">summary_table</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Variable"</span>, <span class="st">"Min"</span>, <span class="st">"Q1"</span>, <span class="st">"Median"</span>, <span class="st">"Mean"</span>, <span class="st">"Q3"</span>, <span class="st">"Max"</span><span class="op">)</span></span>
<span><span class="va">summary_table</span></span></code></pre></div>
</div>
<div id="apêndices-9" class="section level2 unnumbered">
<h2>Apêndices<a class="anchor" aria-label="anchor" href="#ap%C3%AAndices-9"><i class="fas fa-link"></i></a>
</h2>
</div>
<div id="sites-consultados-7" class="section level2 unnumbered">
<h2>Sites consultados<a class="anchor" aria-label="anchor" href="#sites-consultados-7"><i class="fas fa-link"></i></a>
</h2>
</div>
<div id="script-limpo-7" class="section level2 unnumbered">
<h2>Script limpo<a class="anchor" aria-label="anchor" href="#script-limpo-7"><i class="fas fa-link"></i></a>
</h2>
<p>Aqui apresento o scrip na íntegra sem os textos ou outros comentários. Você pode copiar e colar no R para executa-lo. Lembre de remover os <span style="color:green"><code>#</code></span> ou <span style="color:green"><code>##</code></span> caso necessite executar essas linhas.</p>
</div>
<div id="referências-11" class="section level2 unnumbered">
<h2>Referências<a class="anchor" aria-label="anchor" href="#refer%C3%AAncias-11"><i class="fas fa-link"></i></a>
</h2>

</div>
</div>
<h3>Bibliografia Geral</h3>
<div id="refs" class="references csl-bib-body" entry-spacing="1">
<div id="ref-RN2491" class="csl-entry">
MEDEIROS, E. S. F.; SILVA, M. J.; RAMOS, R. T. C. Application of catchment- and local-scale variables for aquatic habitat characterization and assessment in the Brazilian semi-arid region. <strong>Neotropical Biology and Conservation</strong>, [s. l.], v. 3, n. 1, p. 13–20, 2008. Disponível em: &lt;<a href="https://revistas.unisinos.br/index.php/neotropical/article/view/5440">https://revistas.unisinos.br/index.php/neotropical/article/view/5440</a>&gt;
</div>
<div id="ref-RN67" class="csl-entry">
SOKAL, R. R.; ROHLF, F. J. <strong>Biometry: The Principles and Practice of Statistics in Biological Research</strong>. 3. ed. New York: W.H. Freeman; Company, 1995. p. 776
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="partdiv.html"><span class="header-section-number">12</span> R Modulo 4.2 - Decomposição da diversidade</a></div>
<div class="next"><a href="reltrns.html"><span class="header-section-number">14</span> R Modulo 5 - Relativizações e transformações</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li>
<a class="nav-link" href="#estrhab"><span class="header-section-number">13</span> R Modulo 4.3 - Estrutura do habitat</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#resumo-10">RESUMO</a></li>
<li><a class="nav-link" href="#apresenta%C3%A7%C3%A3o-10">Apresentação</a></li>
</ul>
</li>
<li><a class="nav-link" href="#sobre-os-dados-5"><span class="header-section-number">13.1</span> Sobre os dados</a></li>
<li>
<a class="nav-link" href="#organiza%C3%A7%C3%A3o-b%C3%A1sica-7"><span class="header-section-number">13.2</span> Organização básica</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#instalando-os-pacotes-necess%C3%A1rios-para-esse-m%C3%B3dulo."><span class="header-section-number">13.2.1</span> Instalando os pacotes necessários para esse módulo.</a></li></ul>
</li>
<li><a class="nav-link" href="#importando-a-planilha-6"><span class="header-section-number">13.3</span> Importando a planilha</a></li>
<li><a class="nav-link" href="#reset-point-2"><span class="header-section-number">13.4</span> Reset point</a></li>
<li><a class="nav-link" href="#correlograma-e-remo%C3%A7%C3%A3o-de-vari%C3%A1veis-redundantes-ou-desnecess%C3%A1rias"><span class="header-section-number">13.5</span> Correlograma e remoção de variáveis redundantes ou desnecessárias</a></li>
<li><a class="nav-link" href="#deletando-vari%C3%A1veis-colineares"><span class="header-section-number">13.6</span> Deletando variáveis colineares</a></li>
<li><a class="nav-link" href="#somando-vari%C3%A1veis-redundantes"><span class="header-section-number">13.7</span> Somando variáveis redundantes</a></li>
<li><a class="nav-link" href="#tabela-de-dados-ambientais"><span class="header-section-number">13.8</span> Tabela de dados ambientais</a></li>
<li><a class="nav-link" href="#ap%C3%AAndices-9">Apêndices</a></li>
<li><a class="nav-link" href="#sites-consultados-7">Sites consultados</a></li>
<li><a class="nav-link" href="#script-limpo-7">Script limpo</a></li>
<li><a class="nav-link" href="#refer%C3%AAncias-11">Referências</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Fundamentos de Ecologia Numérica</strong>: Disciplina de Ecologia Numérica do Curso de Ciências Biológicas do Campus V da UEPB" was written by Prof. Elvio S. F. Medeiros, Laboratório de Ecologia, Universidade Estadual da Paraíba, Campus V, João Pessoa, PB. It was last built on Last updated: 09/02/2026 12:56:20.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
